<ion-content [fullscreen]="true" style="top: 3%">
  <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>
  <div class="heading ion-padding">
    <ion-text color="light">
      <h1 color="white">Hey, <font color="#16cf65;">{{ username }}</font></h1>
      <h4 color="white">here's the list of your accepted appointments</h4>
    </ion-text>
  </div>

  <ion-toolbar class="searchBar">
    <!-- Searchbar with a placeholder -->
    <ion-searchbar
      placeholder="Filter Schedules"
      (ionChange)="Search($event)"
    ></ion-searchbar>
  </ion-toolbar>

  <form>
    <div class="login-section" style="top: 40%">
      <div class="login-form">
        <ion-slides pager="true" *ngIf="show" [options]="slideOpts">
          <ion-slide
            *ngFor="let schedule of schedules ; index as i"
            lines="none"
          >
            <!-- <ion-card (click)="stat(schedule.schedule_id)"> -->
            <ion-card style="margin-top: 10px; background: #fff">
              <ion-toolbar class="ion-toolbar">
                <ion-item>
                  <ion-avatar slot="start">
                    <img
                      src="https://ionicframework.com/docs/demos/api/avatar/avatar.svg"
                    />
                  </ion-avatar>
                  <ion-label>
                    <h3>{{ schedule.account_name }}</h3>
                    <p>{{ schedule.concern }}</p>
                  </ion-label>
                </ion-item>
                <ion-buttons slot="primary">
                  <!-- <ion-button
                    (click)="fab(schedule.schedule_status, schedule.schedule_id)"
                  > -->
                  <ion-button (click)="presentPopover(schedule.account_name)">
                    <ion-icon
                      slot="icon-only"
                      name="ellipsis-vertical"
                    ></ion-icon>
                  </ion-button>
                </ion-buttons>
              </ion-toolbar>

              <ion-card-content class="ion-text-left">
                <ion-item>
                  <ion-label>
                    <h2>When (yyyy-mm-dd):</h2>
                    <h3>
                      <ion-chip color="primary">
                        <ion-label>{{schedule.appointment_date}}</ion-label>
                      </ion-chip>
                    </h3>
                  </ion-label>
                </ion-item>
                <ion-item>
                  <ion-label>
                    <h2>Why:</h2>
                    <h3>
                      <ion-chip color="primary">
                        <ion-label>{{schedule.concern}}</ion-label>
                      </ion-chip>
                    </h3>
                  </ion-label>
                </ion-item>
                <ion-item lines="none">
                  <ion-label>
                    <h2>Status:</h2>
                    <h3>
                      <ion-chip color="{{schedule.color}}">
                        <ion-label>{{schedule.schedule_status}}</ion-label>
                      </ion-chip>
                    </h3>
                  </ion-label>
                </ion-item>
              </ion-card-content>
            </ion-card>
          </ion-slide>
        </ion-slides>

        <div style="margin-left: 4%">
          <ion-card *ngIf="!show" style="margin-top: 10px">
            <img style="width: 100%" src="../../../assets/icon/time.jpg" />
          </ion-card>
        </div>
      </div>
    </div>
  </form>
</ion-content>
